<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
    <div class="container-fluid">
           <div class="row">
               <div class="col-md-10">
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">First</th>
                        <th scope="col">Last</th>
                        <th scope="col">Handle</th>
                        <th>Phone</th>
                        <th>Website</th>
                        <th>Edit</th>
                        <th>Delete</th>
                      </tr>
                    </thead>
                    <tbody id="myTable">
                      
                    </tbody>
                  </table>
               </div>
               <div class="col-md-3">

               </div>
           </div>
    </div>
    <script>
        var data ;

        var getInfo = new XMLHttpRequest;
        getInfo.onreadystatechange=function (){
            if(getInfo.readyState == 4 && getInfo.status == 200){
                data = JSON.parse(getInfo.response);
                display(data)
            }
        }
        getInfo.open("GET","https://jsonplaceholder.typicode.com/users");
        getInfo.send()

        console.log(getInfo)
        function display(data){
            document.getElementById("myTable").innerHTML = "";
            for (a in data){
                var tr = document.createElement("tr");
                for(b in data[a]){
                    if(b != "address" && b != "company"){
                        var td = document.createElement("td")
                        td.innerHTML= data[a][b]// 
                        tr.appendChild(td)
                    }
                   
                }

                addEditButton(tr,a)
                // editButton
               
                // DeleteTd
                addDeleteButton(tr,a)
               
                document.getElementById("myTable").appendChild(tr)
            }
        }

        function editUser(i){
    
            document.getElementById('myTable').deleteRow(i)
           var newrow = document.getElementById('myTable').insertRow(i)
            var ind=0
            for (a in data[i]){
                if(a != "company" && a != "address"){
                    var newCell = newrow.insertCell(ind);
                    var input = document.createElement("input");
                    input.setAttribute('class','form-control');
                    input.value = data[i][a]
                    newCell.appendChild(input)
                    ind++
                }
                
            }
            // addEditButton(newrow);
            addupdateButton(newrow,i)
            addDeleteButton(newrow,i)
           //document.getElementById('myTable').insertRow()
        }

        function deleteUser(i){
            console.log(i)
            data.splice(i,1);
            display(data)
        }

        function addEditButton(tr,a){
            var editTd = document.createElement("td");
                var editBtn = document.createElement("button")
                editBtn.innerHTML="Edit";
                editBtn.setAttribute("class","btn btn-info");
                editBtn.setAttribute("onclick","editUser("+a+")")
                editTd.appendChild(editBtn)
                tr.appendChild(editTd);
        }

        function addDeleteButton(tr,a){
            var deleteTd= document.createElement("td")
                var deleteBtn = document.createElement("button");
                deleteBtn.innerHTML="Delete";
                deleteBtn.setAttribute("class","btn btn-danger")
                deleteBtn.setAttribute("onclick","deleteUser("+a+")")
                deleteTd.appendChild(deleteBtn);
                tr.appendChild(deleteTd)
            
        }
        function addupdateButton(tr,a){
            var updateTd = document.createElement("td");
                var updateBtn = document.createElement("button")
                updateBtn.innerHTML="Update";
                updateBtn.setAttribute("class","btn btn-warning");
                updateBtn.setAttribute("onclick","updateUser("+a+")")
                updateTd.appendChild(updateBtn)
                tr.appendChild(updateTd);
        }
        function updateUser(i){
            document.getElementById("myTable").deleteRow(i)
            var newrow = document.getElementById("myTable").insertRow(i)
            var ind=0
            for (a in data[i]){
                if(a != "company" && a != "address"){
                    var newCell = newrow.insertCell(ind);
                    var inputtd = document.createElement("td");
                    inputtd.value = data[i][a]
                    newCell.appendChild(inputtd)
                    ind++
                }
                
            }
            addEditButton(newrow,i)
            addDeleteButton(newrow,i)

        }


    </script>
</body>
</html>